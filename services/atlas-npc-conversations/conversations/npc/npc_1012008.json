{
  "npcId": 1012008,
  "startState": "start",
  "states": [
    {
      "id": "start",
      "type": "listSelection",
      "listSelection": {
        "title": "Hey, you look like you need a breather. You should be enjoying the life, just like I am. Well, if you have a couple of items, I can trade you for an item you can play minigames with. Now... what can I do for you?",
        "choices": [
          {
            "text": "Create a minigame item",
            "nextState": "createMenu"
          },
          {
            "text": "Explain to me what the minigames are about",
            "nextState": "explainMenu"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "createMenu",
      "type": "listSelection",
      "listSelection": {
        "title": "You want to make the minigame item? Minigames aren't something you can just go ahead and play right off the bat. For each minigame, you'll need a specific set of items. Which minigame it em do you want to make?",
        "choices": [
          {
            "text": "Omok Set",
            "nextState": "omokSetIntro"
          },
          {
            "text": "A Set of Match Cards",
            "nextState": "checkMatchCards"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMenu",
      "type": "listSelection",
      "listSelection": {
        "title": "You want to learn more about the minigames? Awesome! Ask me anything. Which minigame do you want to know more about?",
        "choices": [
          {
            "text": "Omok",
            "nextState": "explainOmok1"
          },
          {
            "text": "Match Cards",
            "nextState": "explainMatch1"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok1",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Here are the rules for Omok, so listen carefully. Omok is a game in which you and your opponent take turns laying a piece on the table until someone finds a way to lay 5 consecutive pieces in a line, be it horizontal, diagonal, or vertical. For starters, only the ones with an #bOmok Set#k can open a game room.",
        "choices": [
          {
            "text": "Next",
            "nextState": "explainOmok2"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok2",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Every game of Omok will cost you #r100 mesos#k. Even if you don't have an #bOmok Set#k, you can enter the room and play. However, if you don't possess 100 mesos, then you won't be allowed to enter in the room at all. The person opening the game room also needs 100 mesos to open the room (or else there's no game). If you run out of mesos during the game, then you're automatically kicked out of the room!",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainOmok1"
          },
          {
            "text": "Next",
            "nextState": "explainOmok3"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok3",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Enter the room, and when you're ready to play, click on #bReady#k.\r\nOnce the visitor clicks on #bReady#k, the room owner can press #bStart#k to begin the game. If an unwanted visitor walks in, and you don't want to play with that person, the room owner has the right to kick the visitor out of the room. There will be a square box with x written on the right of that person. Click on that for a cold goodbye, okay?",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainOmok2"
          },
          {
            "text": "Next",
            "nextState": "explainOmok4"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok4",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "When the first fame starts, #bthe room owner goes first#k. Beward that you'll be given a time limit, and you may lose your turn if you don't make your move on time. Normally, 3 x 3 is not allowed, but if there comes a point that it's absolutely necessary to put your piece there or face ending the game, then you can put it there. 3 x 3 is allowed as the last line of defense! Oh, and it won't count if it's #r6 or 7 straight#k. Only 5!",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainOmok3"
          },
          {
            "text": "Next",
            "nextState": "explainOmok5"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok5",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "If you know your back is against the wall, you can request a #bRedo#k. If the opponent accepts your request, then you and your opponent's last moves will cancel out. If you ever feel the need to go to the bathroom, or take an extended break, you can request a #btie#k. The game will end in a tie if the opponent accepts the request. Tip: this may be a good way to keep your friendships in tact.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainOmok4"
          },
          {
            "text": "Next",
            "nextState": "explainOmok6"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainOmok6",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendPrev",
        "text": "When the next game starts, the loser will go first. Also, no one is allowed to leave in the middle of a game. If you do, you may need to request either a #bforfeit or tie#k. (Of course, if you request a forfeit, you'll lose the game.) And if you click on 'Leave' in the middle of the game and call to leave after the game, you'll leave the room right after the game is over. This will be a much more useful way to leave.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainOmok5"
          },
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch1",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Here are the rules for Match Cards, so listen carefully. As the name suggests, Match Cards is simply finding a matching pair among the number of cards laid on the table. When all the matching pairs are found, then the person with more matching pairs will win the game. Just like Omok, you'll need #bA set of Match Cards#k to open the game room.",
        "choices": [
          {
            "text": "Next",
            "nextState": "explainMatch2"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch2",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Every game of Match Cards will cost you #r100 mesos#k. Even if you don't have #bA set of Match Cards#k, you can enter the room and play. However, if you don't possess 100 mesos, then you won't be allowed to enter in the room at all. The person opening the game room also needs 100 mesos to open the room (or else there's no game). If you run out of mesos during the game, then you're automatically kicked out of the room!",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch1"
          },
          {
            "text": "Next",
            "nextState": "explainMatch3"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch3",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Enter the room, and when you're ready to play, click on #bReady#k.\r\nOnce the visitor clicks on #bReady#k, the room owner can press #bStart#k to begin the game. If an unwanted visitor walks in, and you don't want to play with that person, the room owner has the right to kick the visitor out of the room. There will be a square box with x written on the right of that person. Click on that for a cold goodbye, okay?",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch2"
          },
          {
            "text": "Next",
            "nextState": "explainMatch4"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch4",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Oh, and unlike Omok, when you create the game room for Match Cards, you'll need to set your game on the number of cards you'll use for the game. There are 3 modes avaliable, 3x4, 4x5, and 5x6, which will require 12, 20, and 30 cards respectively. Remember that you won't beable to change it up once the room is open, so if you really wish to change it up, you may have to close the room and open another one.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch3"
          },
          {
            "text": "Next",
            "nextState": "explainMatch5"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch5",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "When the first game starts, #bthe room owner goes first.#k Beware that you'll be given a time limit, and you may lose your turn if you don't make your move on time. When you find a matching pair on your turn, you'll get to keep your turn, as long as you keep finding a pair of matching cards. Use your memorizing skills to make a streak.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch4"
          },
          {
            "text": "Next",
            "nextState": "explainMatch6"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch6",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "If you and your opponent have the same number of matched pairs, then whoever had a longer streak of matched pairs will win. If you ever feel the need to go to the bathroom, or take an extended break, you can request a #btie#k. The game will end in a tie if the opponent accepts the request. Tip: this may be a good way to keep your friendships in tact.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch5"
          },
          {
            "text": "Next",
            "nextState": "explainMatch7"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "explainMatch7",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendPrev",
        "text": "When the next game starts, the loser will go first. Also, no one is allowed to leave in the middle of a game. If you do, you may need to request either a #bforfeit or tie#k. (Of course, if you request a forfeit, you'll lose the game.) And if you click on 'Leave' in the middle of the game and call to leave after the game, you'll leave the room right after the game is over. This will be a much more useful way to leave.",
        "choices": [
          {
            "text": "Previous",
            "nextState": "explainMatch6"
          },
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "omokSetIntro",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "You want to play #bOmok#k, huh? To play it, you'll need the Omok Set. Only the ones with that item can open the room for a game of Omok, and you can play this game almost anywhere except for a few places at the market place.",
        "choices": [
          {
            "text": "Next",
            "nextState": "selectOmokType"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "selectOmokType",
      "type": "listSelection",
      "listSelection": {
        "title": "The set also differs based on what kind of pieces you want to use for the game. Which set would you like to make?",
        "choices": [
          {
            "text": "#t4080000#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080000",
              "piece1Id": "4030000",
              "piece2Id": "4030001"
            }
          },
          {
            "text": "#t4080001#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080001",
              "piece1Id": "4030000",
              "piece2Id": "4030010"
            }
          },
          {
            "text": "#t4080002#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080002",
              "piece1Id": "4030000",
              "piece2Id": "4030011"
            }
          },
          {
            "text": "#t4080003#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080003",
              "piece1Id": "4030010",
              "piece2Id": "4030001"
            }
          },
          {
            "text": "#t4080004#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080004",
              "piece1Id": "4030011",
              "piece2Id": "4030010"
            }
          },
          {
            "text": "#t4080005#",
            "nextState": "checkOmokMaterials",
            "context": {
              "omokId": "4080005",
              "piece1Id": "4030011",
              "piece2Id": "4030001"
            }
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "checkOmokMaterials",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {
            "conditions": [
              {
                "type": "item",
                "operator": ">=",
                "value": "99",
                "referenceId": "{context.piece1Id}"
              },
              {
                "type": "item",
                "operator": ">=",
                "value": "99",
                "referenceId": "{context.piece2Id}"
              },
              {
                "type": "item",
                "operator": ">=",
                "value": "1",
                "referenceId": "4030009"
              }
            ],
            "nextState": "craftOmok"
          },
          {
            "conditions": [],
            "nextState": "omokInsufficientMaterials"
          }
        ]
      }
    },
    {
      "id": "craftOmok",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {
            "type": "destroy_item",
            "params": {
              "itemId": "{context.piece1Id}",
              "quantity": "99"
            }
          },
          {
            "type": "destroy_item",
            "params": {
              "itemId": "{context.piece2Id}",
              "quantity": "99"
            }
          },
          {
            "type": "destroy_item",
            "params": {
              "itemId": "4030009",
              "quantity": "1"
            }
          },
          {
            "type": "award_item",
            "params": {
              "itemId": "{context.omokId}",
              "quantity": "1"
            }
          }
        ],
        "outcomes": [
          {
            "conditions": [],
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "omokInsufficientMaterials",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "#bYou want to make #t{context.omokId}##k? Hmm...get me the materials, and I can do just that. Listen carefully, the materials you need will be: #r99 #t{context.piece1Id}#, 99 #t{context.piece2Id}#, 1 #t4030009##k. The monsters will probrably drop those every once in a while...",
        "choices": [
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "checkMatchCards",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {
            "conditions": [
              {
                "type": "item",
                "operator": ">=",
                "value": "15",
                "referenceId": "4030012"
              }
            ],
            "nextState": "craftMatchCards"
          },
          {
            "conditions": [],
            "nextState": "matchCardsInsufficientMaterials"
          }
        ]
      }
    },
    {
      "id": "craftMatchCards",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {
            "type": "destroy_item",
            "params": {
              "itemId": "4030012",
              "quantity": "15"
            }
          },
          {
            "type": "award_item",
            "params": {
              "itemId": "4080100",
              "quantity": "1"
            }
          }
        ],
        "outcomes": [
          {
            "conditions": [],
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "matchCardsInsufficientMaterials",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "You want #bA set of Match Cards#k? Hmm...to make A set of Match Cards, you'll need some #bMonster Cards#k. Monster Card can be obtained by taking out the monsters all around the island. Collect 15 Monster Cards and you can make a set of A set of Match Cards.",
        "choices": [
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    }
  ]
}
