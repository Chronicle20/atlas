{
  "npcId": 1012100,
  "startState": "startRoute",
  "states": [
    {
      "id": "startRoute",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "jobId", "operator": "=", "value": "0"}], "nextState": "firstJobIntro"},
          {"conditions": [{"type": "jobId", "operator": "=", "value": "300"}], "nextState": "checkSecondJobLevel"},
          {"conditions": [], "nextState": "checkThirdJobInit"}
        ]
      }
    },

    {
      "id": "checkSecondJobLevel",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "level", "operator": ">=", "value": "30"}], "nextState": "secondJobCheckItems"},
          {"conditions": [], "nextState": "checkThirdJobInit"}
        ]
      }
    },
    {
      "id": "secondJobCheckItems",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "item", "operator": ">=", "value": "1", "referenceId": "4031012"}], "nextState": "secondJobWithProof"},
          {"conditions": [{"type": "item", "operator": ">=", "value": "1", "referenceId": "4031011"}], "nextState": "secondJobWithLetter"},
          {"conditions": [], "nextState": "secondJobStart"}
        ]
      }
    },

    {
      "id": "checkThirdJobInit",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "questStatus", "operator": "=", "value": "1", "referenceId": "100106"}], "nextState": "checkThirdJobLevel"},
          {"conditions": [], "nextState": "checkJBP"}
        ]
      }
    },
    {
      "id": "checkThirdJobLevel",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "level", "operator": ">=", "value": "70"}], "nextState": "checkThirdJobClass"},
          {"conditions": [], "nextState": "checkJBP"}
        ]
      }
    },
    {
      "id": "checkThirdJobClass",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "jobId", "operator": "=", "value": "310"}], "nextState": "checkThirdJobNoJBP"},
          {"conditions": [{"type": "jobId", "operator": "=", "value": "320"}], "nextState": "checkThirdJobNoJBP"},
          {"conditions": [], "nextState": "checkJBP"}
        ]
      }
    },
    {
      "id": "checkThirdJobNoJBP",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "questStatus", "operator": "=", "value": "0", "referenceId": "100107"}], "nextState": "thirdJobInitIntro"},
          {"conditions": [], "nextState": "checkJBP"}
        ]
      }
    },
    {
      "id": "checkJBP",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "questStatus", "operator": "=", "value": "1", "referenceId": "100107"}], "nextState": "checkJBPItem"},
          {"conditions": [], "nextState": "defaultResponse"}
        ]
      }
    },
    {
      "id": "checkJBPItem",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "item", "operator": ">=", "value": "1", "referenceId": "4031059"}], "nextState": "thirdJobCompleteIntro"},
          {"conditions": [], "nextState": "thirdJobReminder"}
        ]
      }
    },

    {
      "id": "defaultResponse",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "You have chosen wisely.",
        "choices": [
          {"text": "Ok", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "firstJobIntro",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "So you decided to become a #rbowman#k? There are some standards to meet, y'know... #bYour level should be at least 10, with at least 25 DEX#k. Let's see.",
        "choices": [
          {"text": "Next", "nextState": "checkFirstJobRequirements"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "checkFirstJobRequirements",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "level", "operator": "<", "value": "10"}], "nextState": "firstJobInsufficientLevel"},
          {"conditions": [{"type": "dexterity", "operator": "<", "value": "25"}], "nextState": "firstJobInsufficientLevel"},
          {"conditions": [], "nextState": "firstJobConfirm"}
        ]
      }
    },
    {
      "id": "firstJobInsufficientLevel",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "Train a bit more until you reach the base requirements and I can show you the way of the #rBowman#k.",
        "choices": [
          {"text": "Ok", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "firstJobConfirm",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "It is an important and final choice. You will not be able to turn back.",
        "choices": [
          {"text": "Previous", "nextState": "firstJobIntro"},
          {"text": "Next", "nextState": "firstJobCheckInventory1"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "firstJobCheckInventory1",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "inventorySpace", "operator": ">=", "value": "1", "referenceId": "1452051"}], "nextState": "firstJobCheckInventory2"},
          {"conditions": [], "nextState": "firstJobNoSpace"}
        ]
      }
    },
    {
      "id": "firstJobCheckInventory2",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "inventorySpace", "operator": ">=", "value": "1000", "referenceId": "2060000"}], "nextState": "firstJobAdvance"},
          {"conditions": [], "nextState": "firstJobNoSpace"}
        ]
      }
    },
    {
      "id": "firstJobNoSpace",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Make some room in your inventory and talk back to me.",
        "choices": [
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "firstJobAdvance",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "change_job", "params": {"jobId": "300"}},
          {"type": "award_item", "params": {"itemId": "1452051", "quantity": "1"}},
          {"type": "award_item", "params": {"itemId": "2060000", "quantity": "1000"}},
          {"type": "reset_stats", "params": {}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": "firstJobSuccess1"}
        ]
      }
    },
    {
      "id": "firstJobSuccess1",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Alright, from here out, you are a part of us! You'll be living the life of a wanderer at ..., but just be patient as soon, you'll be living the high life. Alright, it ain't much, but I'll give you some of my abilities... HAAAHHH!!!",
        "choices": [
          {"text": "Next", "nextState": "firstJobSuccess2"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "firstJobSuccess2",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "You've gotten much stronger now. Plus every single one of your inventories have added slots. A whole row, to be exact. Go see for it yourself. I just gave you a little bit of #bSP#k. When you open up the #bSkill#k menu on the lower left corner of the screen, there are skills you can learn by using SP's. One warning, though: You can't raise it all together all at once. There are also skills you can acquire only after having learned a couple of skills first.",
        "choices": [
          {"text": "Previous", "nextState": "firstJobSuccess1"},
          {"text": "Next", "nextState": "firstJobSuccess3"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "firstJobSuccess3",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Now a reminder. Once you have chosen, you cannot change up your mind and try to pick another path. Go now, and live as a proud Bowman.",
        "choices": [
          {"text": "Previous", "nextState": "firstJobSuccess2"},
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "secondJobWithLetter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "Go and see the #b#p1072002##k.",
        "choices": [
          {"text": "Ok", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "secondJobStart",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendYesNo",
        "text": "Hmmm... you have grown a lot since I last saw you. I don't see the weakling I saw before, and instead, look much more like a bowman now. Well, what do you think? Don't you want to get even more powerful than that? Pass a simple test and I'll do just that for you. Do you want to do it?",
        "choices": [
          {"text": "Yes", "nextState": "secondJobGiveLetter"},
          {"text": "No", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobGiveLetter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Good decision. You look strong, but I need to see if you really are strong enough to pass the test, it's not a difficult test, so you'll do just fine. Here, take my letter first... make sure you don't lose it!",
        "choices": [
          {"text": "Next", "nextState": "secondJobStartQuest"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobStartQuest",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "start_quest", "params": {"questId": "100000"}}
        ],
        "outcomes": [
          {"conditions": [{"type": "item", "operator": ">=", "value": "1", "referenceId": "4031010"}], "nextState": "secondJobInstructions"},
          {"conditions": [], "nextState": "secondJobCheckLetterSpace"}
        ]
      }
    },
    {
      "id": "secondJobCheckLetterSpace",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {"conditions": [{"type": "inventorySpace", "operator": ">=", "value": "1", "referenceId": "4031010"}], "nextState": "secondJobAwardLetter"},
          {"conditions": [], "nextState": "secondJobNoSpace"}
        ]
      }
    },
    {
      "id": "secondJobAwardLetter",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "award_item", "params": {"itemId": "4031010", "quantity": "1"}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": "secondJobInstructions"}
        ]
      }
    },
    {
      "id": "secondJobNoSpace",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Please, make some space in your inventory.",
        "choices": [
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobInstructions",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Please get this letter to #b#p1072002##k who's around #b#m106010000##k near Henesys. She is taking care of the job of an instructor in place of me. Give her the letter and she'll test you in place of me. Best of luck to you.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobGiveLetter"},
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "secondJobWithProof",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Haha...I knew you'd breeze through that test. I'll admit, you are a great bowman. I'll make you much stronger than you're right now. before that, however... you;ll need to choose one of two paths given to you. It'll be a difficult decision for you to make, but... if there's any question to ask, please do so.",
        "choices": [
          {"text": "Next", "nextState": "secondJobChoiceMenu"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobChoiceMenu",
      "type": "listSelection",
      "listSelection": {
        "title": "Alright, when you have made your decision, click on [I'll choose my occupation] at the bottom.",
        "choices": [
          {"text": "Please explain to me what being the Hunter is all about.", "nextState": "explainHunter"},
          {"text": "Please explain to me what being the Crossbowman is all about.", "nextState": "explainCrossbowman"},
          {"text": "I'll choose my occupation!", "nextState": "chooseJob"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "explainHunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Archers that master #rBows#k.\r\n\r\n#bHunters#k have a higher damage/minute output in early levels, with attacks having a faster pace but slightly weaker than Crossbowmans. #bHunters#k get #rArrow Bomb#k, a slightly weaker attack that can cause up to 6 enemies to get stunned.",
        "choices": [
          {"text": "Next", "nextState": "secondJobChoiceMenu"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "explainCrossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Archers that master #rCrossbows#k.\r\n\r\n#bCrossbowmans'#k attack power grows higher the higher level you are, when compared to Hunters. #bCrossbowmans#k get #rIron Arrow#k, a stronger attack that does not home on enemies but can go through walls.",
        "choices": [
          {"text": "Next", "nextState": "secondJobChoiceMenu"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "chooseJob",
      "type": "listSelection",
      "listSelection": {
        "title": "Now... have you made up your mind? Please choose the job you'd like to select for your 2nd job advancement.",
        "choices": [
          {"text": "Hunter", "nextState": "confirmHunter", "context": {"jobId": "310", "jobName": "Hunter", "jobNameLower": "hunter"}},
          {"text": "Crossbowman", "nextState": "confirmCrossbowman", "context": {"jobId": "320", "jobName": "Crossbowman", "jobNameLower": "crossbowman"}},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "confirmHunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendYesNo",
        "text": "So you want to make the second job advancement as the #bHunter#k? You know you won't be able to choose a different job for the 2nd job advancement once you make your desicion here, right?",
        "choices": [
          {"text": "Yes", "nextState": "performSecondJobHunter"},
          {"text": "No", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "confirmCrossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendYesNo",
        "text": "So you want to make the second job advancement as the #bCrossbowman#k? You know you won't be able to choose a different job for the 2nd job advancement once you make your desicion here, right?",
        "choices": [
          {"text": "Yes", "nextState": "performSecondJobCrossbowman"},
          {"text": "No", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "performSecondJobHunter",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "destroy_item", "params": {"itemId": "4031012", "quantity": "1"}},
          {"type": "change_job", "params": {"jobId": "310"}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": "secondJobComplete1Hunter"}
        ]
      }
    },
    {
      "id": "performSecondJobCrossbowman",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "destroy_item", "params": {"itemId": "4031012", "quantity": "1"}},
          {"type": "change_job", "params": {"jobId": "320"}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": "secondJobComplete1Crossbowman"}
        ]
      }
    },
    {
      "id": "secondJobComplete1Hunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Alright, you're the #bHunter#k from here on out. #bHunter#ks are the intelligent bunch with incredible vision, able to pierce the arrow through the heart of the monsters with ease... please train yourself each and everyday. I'll help you become even stronger than you already are.",
        "choices": [
          {"text": "Next", "nextState": "secondJobComplete2Hunter"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete1Crossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Alright, you're the #bCrossbowman#k from here on out. #bCrossbowman#ks are the intelligent bunch with incredible vision, able to pierce the arrow through the heart of the monsters with ease... please train yourself each and everyday. I'll help you become even stronger than you already are.",
        "choices": [
          {"text": "Next", "nextState": "secondJobComplete2Crossbowman"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete2Hunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "I have just given you a book that gives you the list of skills you can acquire as a hunter. Also your etc inventory has expanded by adding another row to it. Your max HP and MP have increased, too. Go check and see for it yourself.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete1Hunter"},
          {"text": "Next", "nextState": "secondJobComplete3Hunter"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete2Crossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "I have just given you a book that gives you the list of skills you can acquire as a crossbowman. Also your etc inventory has expanded by adding another row to it. Your max HP and MP have increased, too. Go check and see for it yourself.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete1Crossbowman"},
          {"text": "Next", "nextState": "secondJobComplete3Crossbowman"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete3Hunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete2Hunter"},
          {"text": "Next", "nextState": "secondJobComplete4Hunter"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete3Crossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "I have also given you a little bit of #bSP#k. Open the #bSkill Menu#k located at the bottomleft corner. you'll be able to boost up the newer acquired 2nd level skills. A word of warning, though. You can't boost them up all at once. Some of the skills are only available after you have learned other skills. Make sure yo remember that.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete2Crossbowman"},
          {"text": "Next", "nextState": "secondJobComplete4Crossbowman"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete4Hunter",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Hunter need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete3Hunter"},
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "secondJobComplete4Crossbowman",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Crossbowman need to be strong. But remember that you can't abuse that power and use it on a weakling. Please use your enormous power the right way, because... for you to use that the right way, that is much harden than just getting stronger. Please find me after you have advanced much further. I'll be waiting for you.",
        "choices": [
          {"text": "Previous", "nextState": "secondJobComplete3Crossbowman"},
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "thirdJobInitIntro",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "There you are. A few days ago, #b#p2020010##k of Ossyria talked to me about you. I see that you are interested in making the leap to the amazing world of the third job advancement for archers. To achieve that goal, I will have to test your strength in order to see whether you are worthy of the advancement. There is an opening in the middle of a deep forest in Victoria Island, where it'll lead you to a secret passage. Once inside, you'll face a clone of myself. Your task is to defeat her and bring #b#t4031059##k back with you.",
        "choices": [
          {"text": "Next", "nextState": "thirdJobInitAction"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "thirdJobInitAction",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "complete_quest", "params": {"questId": "100106", "force": "true"}},
          {"type": "start_quest", "params": {"questId": "100107"}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": "thirdJobInitBattle"}
        ]
      }
    },
    {
      "id": "thirdJobInitBattle",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNextPrev",
        "text": "Since she is a clone of myself, you can expect a tough battle ahead. He uses a number of special attacking skills unlike any you have ever seen, and it is your task to successfully take him one on one. There is a time limit in the secret passage, so it is crucial that you defeat him within the time limit. I wish you the best of luck, and I hope you bring the #b#t4031059##k with you.",
        "choices": [
          {"text": "Previous", "nextState": "thirdJobInitIntro"},
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "thirdJobReminder",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Please, bring me the #b#t4031059##k.",
        "choices": [
          {"text": "Next", "nextState": null},
          {"text": "Exit", "nextState": null}
        ]
      }
    },

    {
      "id": "thirdJobCompleteIntro",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Nice work. You have defeated my clone and brought #b#t4031059##k back safely. You have now proven yourself worthy of the 3rd job advancement from the physical standpoint. Now you should give this necklace to #b#p2020011##k in Ossyria to take on the second part of the test. Good luck. You'll need it.",
        "choices": [
          {"text": "Next", "nextState": "thirdJobCompleteAction"},
          {"text": "Exit", "nextState": null}
        ]
      }
    },
    {
      "id": "thirdJobCompleteAction",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {"type": "complete_quest", "params": {"questId": "100107", "force": "true"}},
          {"type": "destroy_item", "params": {"itemId": "4031059", "quantity": "1"}},
          {"type": "award_item", "params": {"itemId": "4031057", "quantity": "1"}}
        ],
        "outcomes": [
          {"conditions": [], "nextState": null}
        ]
      }
    }
  ]
}
