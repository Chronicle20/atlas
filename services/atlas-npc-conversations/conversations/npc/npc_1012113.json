{
  "npcId": 1012113,
  "startState": "checkMap",
  "states": [
    {
      "id": "checkMap",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {
            "conditions": [
              {
                "type": "mapId",
                "operator": "=",
                "value": "910010100"
              }
            ],
            "nextState": "introDialogue"
          },
          {
            "conditions": [
              {
                "type": "mapId",
                "operator": "=",
                "value": "910010200"
              }
            ],
            "nextState": "askExitBonus"
          },
          {
            "conditions": [
              {
                "type": "mapId",
                "operator": "=",
                "value": "910010300"
              }
            ],
            "nextState": "exitMessage"
          }
        ]
      }
    },
    {
      "id": "introDialogue",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendNext",
        "text": "Hello, there! I'm Tommy. There's a Pig Town nearby where we're standing. The pigs there are rowdy and uncontrollable to the point where they have stolen numerous weapons from travelers. They were kicked out from their towns, and are currently hiding out at the Pig Town.",
        "choices": [
          {
            "text": "Next",
            "nextState": "checkPartyLeader"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "checkPartyLeader",
      "type": "genericAction",
      "genericAction": {
        "operations": [],
        "outcomes": [
          {
            "conditions": [
              {
                "type": "partyLeader",
                "operator": "=",
                "value": "1"
              }
            ],
            "nextState": "confirmProceed"
          },
          {
            "conditions": [],
            "nextState": "notLeader"
          }
        ]
      }
    },
    {
      "id": "confirmProceed",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendYesNo",
        "text": "What do you think about making your way there with your party members and teach those rowdy pigs a lesson?",
        "choices": [
          {
            "text": "Yes",
            "nextState": "warpTeamToBonus"
          },
          {
            "text": "No",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "warpTeamToBonus",
      "type": "partyQuestBonusAction",
      "partyQuestBonusAction": {
        "failureState": "bonusFailed"
      }
    },
    {
      "id": "bonusFailed",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "It seems the bonus stage isn't available right now. You can try talking to me again later.",
        "choices": [
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "notLeader",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "Interessed? Tell your party leader to talk to me to head there!",
        "choices": [
          {
            "text": "Ok",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "askExitBonus",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendYesNo",
        "text": "Would you like to exit the bonus now?",
        "choices": [
          {
            "text": "Yes",
            "nextState": "warpFromBonus"
          },
          {
            "text": "No",
            "nextState": null
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "warpFromBonus",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {
            "type": "warp_to_map",
            "params": {
              "mapId": "910010400",
              "portalId": "0"
            }
          }
        ],
        "outcomes": [
          {
            "conditions": [],
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "exitMessage",
      "type": "dialogue",
      "dialogue": {
        "dialogueType": "sendOk",
        "text": "You will now be warped out, thank you for helping us!",
        "choices": [
          {
            "text": "Ok",
            "nextState": "warpToHenesys"
          },
          {
            "text": "Exit",
            "nextState": null
          }
        ]
      }
    },
    {
      "id": "warpToHenesys",
      "type": "genericAction",
      "genericAction": {
        "operations": [
          {
            "type": "warp_to_map",
            "params": {
              "mapId": "100000200",
              "portalId": "0"
            }
          }
        ],
        "outcomes": [
          {
            "conditions": [],
            "nextState": null
          }
        ]
      }
    }
  ]
}
