{
  "questId": 20010,
  "npcId": 1102004,
  "questName": "Basic Knowledge of Maple World",
  "startStateMachine": {
    "startState": "welcome",
    "states": [
      {
        "id": "welcome",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Welcome to Ereve! And you are? Oh, you're #b#h ##k! \r\nGood to meet you. I've been waiting. You've come to become a Cygnus Knight, right? My name is Kimu, and I'm currently guiding Noblesses like you at the request of Empress Cygnus.",
          "choices": [
            {"text": "Next", "nextState": "aboutEmpress"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "aboutEmpress",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "text": "If you want to officially become a part of Cygnus Knights, you must first meet the Empress. She's at the center of this island, accompained by Shinsoo. My brothers and I would like to share with you a few things that are considered #bBasic Knowledge#k in Maple World before you go. Would that be okay?",
          "choices": [
            {"text": "Previous", "nextState": "welcome"},
            {"text": "Next", "nextState": "aboutQuests"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "aboutQuests",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "text": "Oh, let me warn you that this is a Quest. You may have noticed that NPCs around Maple World occasionally ask you for various favors. A favor of that sort is called a #bQuest#k. You will receive reward items or EXP upon completing Quests, so I strongly suggest you diligently fulfill the favors of Maple NPCs.",
          "choices": [
            {"text": "Previous", "nextState": "aboutEmpress"},
            {"text": "Next", "nextState": "askAccept"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "askAccept",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendAcceptDecline",
          "text": "Would you like to meet #bKizan#k, who can tell you about hunting? You can find Kizan by following the arrow to the left.",
          "choices": [
            {"text": "Accept", "nextState": "startQuest"},
            {"text": "Decline", "nextState": "declineMessage"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "declineMessage",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Whoa, whoa! Are you really declining my offer? Well, you'll be able to #blevel-up quicker #kwith our help, so let me know if you change your mind. Even if you've declined a Quest, you can receive the Quest again if you just come and talk to me.",
          "choices": [
            {"text": "Next", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "startQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "start_quest", "params": {}},
            {"type": "show_guide_hint", "params": {"hintId": "2"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  },
  "endStateMachine": {
    "startState": "rewardMessage",
    "states": [
      {
        "id": "rewardMessage",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Are you the Noblesse my brother Kimu sent? Nice to meet you! I'm Kizan. I'll give you the reward Kimu asked me to give you. Remember, you can check your Inventory by pressing the #bI key#k. Red potions help you recover HP, and blue ones help recover MP. It's a good idea to learn how to use them beforehand so you'll be ready with them when you're in danger. \r\n\r\n#fUI/UIWindow.img/Quest/reward# \r\n\r\n#v2000020# #z2000020# \r\n#v2000021# #z2000021# \r\n\r\n#fUI/UIWindow.img/QuestIcon/8/0#15 exp",
          "choices": [
            {"text": "Ok", "nextState": "checkInventory"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "checkInventory",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "inventorySpace", "operator": "<", "value": "0", "referenceId": "2000022"}
              ],
              "nextState": "inventoryFull"
            },
            {
              "conditions": [
                {"type": "inventorySpace", "operator": "<", "value": "0", "referenceId": "2000023"}
              ],
              "nextState": "inventoryFull"
            },
            {
              "conditions": [],
              "nextState": "checkQuestComplete"
            }
          ]
        }
      },
      {
        "id": "inventoryFull",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "send_message", "params": {"messageType": "POP_UP", "message": "Your inventory is full"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      },
      {
        "id": "checkQuestComplete",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "questStatus", "operator": "=", "value": "2", "referenceId": "21010"}
              ],
              "nextState": "completeQuestNoRewards"
            },
            {
              "conditions": [],
              "nextState": "awardRewards"
            }
          ]
        }
      },
      {
        "id": "awardRewards",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "award_item", "params": {"itemId": "2000020", "quantity": "5"}},
            {"type": "award_item", "params": {"itemId": "2000021", "quantity": "5"}},
            {"type": "award_exp", "params": {"amount": "15"}},
            {"type": "show_guide_hint", "params": {"hintId": "3"}},
            {"type": "complete_quest", "params": {"force": "true"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      },
      {
        "id": "completeQuestNoRewards",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "show_guide_hint", "params": {"hintId": "3"}},
            {"type": "complete_quest", "params": {"force": "true"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  }
}
