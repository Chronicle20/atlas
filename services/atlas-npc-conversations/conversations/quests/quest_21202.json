{
  "questId": 21202,
  "npcId": 1203000,
  "questName": "Giant Polearm",
  "startStateMachine": {
    "startState": "intro",
    "states": [
      {
        "id": "intro",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Hmm.. What's a young person like you doing in this secluded place?",
          "choices": [
            {"text": "Next", "nextState": "playerResponse1"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "playerResponse1",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "speaker": "CHARACTER_LEFT",
          "text": "I've come to get the best Polearm there is!",
          "choices": [
            {"text": "Previous", "nextState": "intro"},
            {"text": "Next", "nextState": "npcResponse1"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "npcResponse1",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "text": "The best Polearm? You should be able to purchase it in some town or other place..",
          "choices": [
            {"text": "Previous", "nextState": "playerResponse1"},
            {"text": "Next", "nextState": "playerResponse2"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "playerResponse2",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "speaker": "CHARACTER_LEFT",
          "text": "I hear you are the best blacksmith in all of Maple World! I want nothing less than a weapon made by you!",
          "choices": [
            {"text": "Previous", "nextState": "npcResponse1"},
            {"text": "Next", "nextState": "askAccept"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "askAccept",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendAcceptDecline",
          "text": "I'm too old to make weapons now, but.. I do have a Polearm that I made way back when. It's still in excellent shape. But I can't give it to you because that Polearm is extremely sharp, so sharp it could hurt its master. Do you still want it?",
          "choices": [
            {"text": "Accept", "nextState": "acceptQuest"},
            {"text": "Decline", "nextState": "decline"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "decline",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Do you not want to put in the work to get the ultimate weapon?",
          "choices": [
            {"text": "Next", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "acceptQuest",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Well, if you say so.. I can't object to that. I'll tell you what. I'll give you a quick test, and if you pass it, the Giant Polearm is yours. Head over to the #bTraining Center#k and take on the #rScarred Bears#k that are there. Your job is to bring back #b30 Sign of Acceptances#k.",
          "choices": [
            {"text": "Ok", "nextState": "startQuest"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "startQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "start_quest", "params": {}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  },
  "endStateMachine": {
    "startState": "checkItems",
    "states": [
      {
        "id": "checkItems",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "item", "operator": "<", "value": "30", "referenceId": "4032311"}
              ],
              "nextState": "missingItems"
            },
            {
              "conditions": [],
              "nextState": "hasItems"
            }
          ]
        }
      },
      {
        "id": "missingItems",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Go for the 30 #t4032311#.",
          "choices": [
            {"text": "Next", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "hasItems",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Oh, have you brought me the #t4032311#? You're stronger than I thought! But more importantly, I am impressed with the amount of courage you displayed when you agreed to take this dangerous weapon without any hesitation. You deserve it. The #p1201001# is yours.",
          "choices": [
            {"text": "Next", "nextState": "handOverWeapon"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "handOverWeapon",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNextPrev",
          "text": "#b(After a long time passed, #p1203000# handed you the #p1201001#, which was carefully wrapped in cloth.)",
          "choices": [
            {"text": "Previous", "nextState": "hasItems"},
            {"text": "Next", "nextState": "confirmCompletion"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "confirmCompletion",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendYesNo",
          "text": "Here, this is #p1201002#, the Polearm you've asked for. Please take good care of it.",
          "choices": [
            {"text": "Yes", "nextState": "completeQuest"},
            {"text": "No", "nextState": "hesitant"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "hesitant",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Hm? Are you hesitant to take it now after all that? Well, give it more thought if you'd like. It'll be yours in the end anyways.",
          "choices": [
            {"text": "Next", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "completeQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "complete_quest", "params": {}},
            {"type": "destroy_item", "params": {"itemId": "4032311", "removeAll": "true"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  }
}
