{
  "questId": 21735,
  "npcId": 1002104,
  "questName": "Delivering the Gem",
  "startStateMachine": {
    "startState": "intro",
    "states": [
      {
        "id": "intro",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Aran, ever since the Puppeteer's ambush on me, I've been thinking it is dangerous to have the #b#t4032323##k around here by myself. So, I need you to deliver the gem to #r#p1201000##k, in Rien, she will know what to do with it.",
          "choices": [
            {"text": "Next", "nextState": "checkInventorySpace"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "checkInventorySpace",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "inventorySpace", "operator": ">=", "value": "1", "referenceId": "4032323"}
              ],
              "nextState": "checkHasItem"
            },
            {
              "conditions": [],
              "nextState": "noSpace"
            }
          ]
        }
      },
      {
        "id": "noSpace",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "Please free a slot on your ETC inventory before receiving the item.",
          "choices": [
            {"text": "Next", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "checkHasItem",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "item", "operator": ">=", "value": "1", "referenceId": "4032323"}
              ],
              "nextState": "startQuest"
            },
            {
              "conditions": [],
              "nextState": "giveItem"
            }
          ]
        }
      },
      {
        "id": "giveItem",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "award_item", "params": {"itemId": "4032323", "quantity": "1"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": "startQuest"}
          ]
        }
      },
      {
        "id": "startQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "start_quest", "params": {}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  },
  "endStateMachine": {
    "startState": "checkGem",
    "states": [
      {
        "id": "checkGem",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "item", "operator": ">=", "value": "1", "referenceId": "4032323"}
              ],
              "nextState": "hasGem"
            },
            {
              "conditions": [],
              "nextState": null
            }
          ]
        }
      },
      {
        "id": "hasGem",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "#r#p1002104##k sent the #b#t4032323##k here for safety? Thank goodness, indeed here the gem will be safer than anywhere on Victoria Island. Thank you, #b#h0##k.",
          "choices": [
            {"text": "Next", "nextState": "completeQuest"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "completeQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "destroy_item", "params": {"itemId": "4032323", "quantity": "1"}},
            {"type": "award_exp", "params": {"amount": "6037"}},
            {"type": "complete_quest", "params": {}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  }
}
