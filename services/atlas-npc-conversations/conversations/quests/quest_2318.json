{
  "questId": 2318,
  "npcId": 1300007,
  "questName": "Killer Mushroom Spores(2)",
  "startStateMachine": {
    "startState": "askAccept",
    "states": [
      {
        "id": "askAccept",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendAcceptDecline",
          "text": "Hmmm... I looked into the making of the Spores while you were gathering up the Poison Mushroom Caps, and realised that we'll need more materials for it. I want you to gather up one more set of items. Can you do it?",
          "choices": [
            {"text": "Accept", "nextState": "startQuest"},
            {"text": "Decline", "nextState": "declineMsg"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "declineMsg",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "I understand it's not an easy task, but I can't make #bKiller Mushroom Spores#k without them. Please reconsider.",
          "choices": [
            {"text": "Ok", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "startQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "start_quest", "params": {}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": "confirmStart"}
          ]
        }
      },
      {
        "id": "confirmStart",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Okay, I want you to defeat the Regenade Spores and bring back #b50 Mutated Spores#k in return.",
          "choices": [
            {"text": "Ok", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      }
    ]
  },
  "endStateMachine": {
    "startState": "askProgress",
    "states": [
      {
        "id": "askProgress",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Did you gather up all the necessary ingredients for it?",
          "choices": [
            {"text": "Ok", "nextState": "checkItems"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "checkItems",
        "type": "genericAction",
        "genericAction": {
          "operations": [],
          "outcomes": [
            {
              "conditions": [
                {"type": "item", "operator": "<", "value": "50", "referenceId": "4000499"}
              ],
              "nextState": "missingItems"
            },
            {
              "conditions": [],
              "nextState": "hasItems"
            }
          ]
        }
      },
      {
        "id": "missingItems",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Please gather all the ingredients first.",
          "choices": [
            {"text": "Ok", "nextState": null},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "hasItems",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendNext",
          "text": "These should be enough for me to make the #bKiller Mushroom Spores.#k Please hold on for a bit.",
          "choices": [
            {"text": "Next", "nextState": "thankYou"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "thankYou",
        "type": "dialogue",
        "dialogue": {
          "dialogueType": "sendOk",
          "text": "Okay, here are the Killer Mushroom Spores. Hopefully this will be enough for you to save our princess and help regain our kingdom. Good luck!",
          "choices": [
            {"text": "Ok", "nextState": "completeQuest"},
            {"text": "Exit", "nextState": null}
          ]
        }
      },
      {
        "id": "completeQuest",
        "type": "genericAction",
        "genericAction": {
          "operations": [
            {"type": "complete_quest", "params": {}},
            {"type": "award_exp", "params": {"amount": "11500"}},
            {"type": "destroy_item", "params": {"itemId": "4000499", "quantity": "50"}},
            {"type": "award_item", "params": {"itemId": "2430014", "quantity": "1"}}
          ],
          "outcomes": [
            {"conditions": [], "nextState": null}
          ]
        }
      }
    ]
  }
}
